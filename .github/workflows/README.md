# GitHub Actions è‡ªåŠ¨æ„å»º Docker é•œåƒ

## ğŸ“‹ é…ç½®æ­¥éª¤

### 1ï¸âƒ£ é…ç½® Docker Hub å¯†é’¥

åœ¨ GitHub ä»“åº“ä¸­é…ç½® Docker Hub çš„å‡­è¯ï¼š

1. è¿›å…¥ä»“åº“çš„ **Settings** â†’ **Secrets and variables** â†’ **Actions**
2. ç‚¹å‡» **New repository secret**
3. æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªå¯†é’¥ï¼š

| Secret Name | Secret Value | è¯´æ˜ |
|------------|--------------|------|
| `DOCKER_USERNAME` | `awdress` | ä½ çš„ Docker Hub ç”¨æˆ·å |
| `DOCKER_PASSWORD` | `ä½ çš„è®¿é—®ä»¤ç‰Œ` | Docker Hub è®¿é—®ä»¤ç‰Œ |

#### ğŸ”‘ è·å– Docker Hub è®¿é—®ä»¤ç‰Œ

1. ç™»å½• [Docker Hub](https://hub.docker.com/)
2. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ **Account Settings**
3. é€‰æ‹© **Security** â†’ **New Access Token**
4. è¾“å…¥æè¿°ï¼ˆå¦‚ï¼šGitHub Actionsï¼‰
5. æƒé™é€‰æ‹©ï¼š**Read, Write, Delete**
6. ç‚¹å‡» **Generate** å¹¶å¤åˆ¶ç”Ÿæˆçš„ä»¤ç‰Œ

### 2ï¸âƒ£ è§¦å‘æ„å»º

å·¥ä½œæµä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨è§¦å‘ï¼š

- âœ… **æ¨é€åˆ° main åˆ†æ”¯**ï¼šè‡ªåŠ¨æ„å»ºå¹¶æ¨é€ `latest` æ ‡ç­¾
- âœ… **åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾**ï¼šå¦‚ `v4.2.0`ï¼Œè‡ªåŠ¨æ„å»ºå¹¶æ¨é€å¯¹åº”ç‰ˆæœ¬
- âœ… **Pull Request**ï¼šä»…æ„å»ºæµ‹è¯•ï¼Œä¸æ¨é€
- âœ… **æ‰‹åŠ¨è§¦å‘**ï¼šåœ¨ Actions é¡µé¢æ‰‹åŠ¨è¿è¡Œ

### 3ï¸âƒ£ æ‰‹åŠ¨è§¦å‘æ„å»º

1. è¿›å…¥ä»“åº“çš„ **Actions** é¡µé¢
2. é€‰æ‹© **Build and Push Docker Image** å·¥ä½œæµ
3. ç‚¹å‡» **Run workflow** æŒ‰é’®
4. é€‰æ‹©åˆ†æ”¯ï¼Œç‚¹å‡» **Run workflow**

### 4ï¸âƒ£ åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆæ¨èï¼‰

æ¨é€å¸¦ç‰ˆæœ¬å·çš„æ ‡ç­¾ä»¥è§¦å‘ç‰ˆæœ¬æ„å»ºï¼š

```bash
# åˆ›å»ºå¹¶æ¨é€ç‰ˆæœ¬æ ‡ç­¾
git tag -a v4.2.0 -m "Release v4.2.0"
git push origin v4.2.0
```

è¿™å°†è‡ªåŠ¨æ„å»ºå¹¶æ¨é€ä»¥ä¸‹æ ‡ç­¾çš„é•œåƒï¼š
- `awdress/awembypush:v4.2.0`
- `awdress/awembypush:4.2`
- `awdress/awembypush:4`
- `awdress/awembypush:latest`

## ğŸ—ï¸ æ„å»ºè¯´æ˜

### æ”¯æŒçš„å¹³å°

- âœ… `linux/amd64` (x86_64)
- âœ… `linux/arm64` (aarch64)

### æ„å»ºç¼“å­˜

- ä½¿ç”¨ GitHub Actions Cache åŠ é€Ÿæ„å»º
- è‡ªåŠ¨ç¼“å­˜å±‚ä»¥æé«˜åç»­æ„å»ºé€Ÿåº¦

### æ„å»ºæ—¶é—´

- é¦–æ¬¡æ„å»ºï¼šçº¦ 3-5 åˆ†é’Ÿ
- åç»­æ„å»ºï¼šçº¦ 1-2 åˆ†é’Ÿï¼ˆå¾—ç›Šäºç¼“å­˜ï¼‰

## ğŸ“Š æŸ¥çœ‹æ„å»ºçŠ¶æ€

åœ¨ä»“åº“çš„ **Actions** é¡µé¢å¯ä»¥æŸ¥çœ‹ï¼š
- âœ… æ„å»ºè¿›åº¦
- âœ… æ„å»ºæ—¥å¿—
- âœ… æ¨é€çš„é•œåƒæ ‡ç­¾

## ğŸš€ ä½¿ç”¨æ„å»ºçš„é•œåƒ

æ„å»ºå®Œæˆåï¼Œå¯ä»¥ç›´æ¥æ‹‰å–ä½¿ç”¨ï¼š

```bash
# æ‹‰å–æœ€æ–°ç‰ˆæœ¬
docker pull awdress/awembypush:latest

# æ‹‰å–æŒ‡å®šç‰ˆæœ¬
docker pull awdress/awembypush:v4.2.0

# æ‹‰å– ARM64 ç‰ˆæœ¬ï¼ˆå¤šæ¶æ„é•œåƒä¼šè‡ªåŠ¨é€‰æ‹©ï¼‰
docker pull awdress/awembypush:latest
```

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

å¦‚éœ€ä¿®æ”¹æ„å»ºé…ç½®ï¼Œç¼–è¾‘ `.github/workflows/docker-build.yml` æ–‡ä»¶ï¼š

- ä¿®æ”¹æ”¯æŒçš„å¹³å°
- è°ƒæ•´æ ‡ç­¾ç­–ç•¥
- æ·»åŠ æ„å»ºå‚æ•°
- é…ç½®é€šçŸ¥ç­‰

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡é…ç½®**ï¼šç¡®ä¿å·²æ­£ç¡®è®¾ç½® Docker Hub å¯†é’¥
2. **æƒé™æ£€æŸ¥**ï¼šç¡®ä¿ GitHub Actions æœ‰ä»“åº“å†™å…¥æƒé™
3. **Docker Hub é™åˆ¶**ï¼šå…è´¹è´¦æˆ·æœ‰æ‹‰å–é™åˆ¶ï¼Œå»ºè®®å‡çº§æˆ–ä½¿ç”¨ç¼“å­˜
4. **å¤šæ¶æ„æ„å»º**ï¼šéœ€è¦æ›´å¤šæ„å»ºæ—¶é—´ï¼Œä½†æä¾›æ›´å¥½çš„å…¼å®¹æ€§

